<div id="map-canvas-home"></div>

<script type="text/javascript">

            function initializeGoogleMap() {
            var city = new google.maps.LatLng({{ latitude }}, {{ longitude }});
            var mapOptions = {
                zoom: {{ map_zoom }},
                center: city
            }
            var map = new google.maps.Map(document.getElementById('map-canvas-home'), mapOptions);
            
            var image = '{{ asset('images/google_marker.gif')}}';
            
            {% if nextEvents is defined %}
                {% for event in nextEvents %}
                    {% if event.isValid %}

                        var pointer{{ loop.index }} = new google.maps.LatLng({{ event.latitude }}, {{ event.longitude }});
                        var marker{{ loop.index }} = new google.maps.Marker({
                            position: pointer{{ loop.index }},
                            map: map,
                            title: '{{ event.getTitle|capitalize }}'
                        }); 

                    {% endif %}
                {% endfor %}
            {% endif %}
               

            }

           google.maps.event.addDomListener(window, 'load', initializeGoogleMap);

</script>