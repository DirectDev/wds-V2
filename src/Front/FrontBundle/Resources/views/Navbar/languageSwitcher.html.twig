<!-- _langueSwitcher.html.twig -->

{# If method is not GET the langue switcher is hidden to prevent change the url on a post action #}
{# if app.request.get('_route') and app.request.get('_method') and "GET" in app.request.get('_method').methods #}

{% set actualLangue = app.request.locale %}

{% set routeParams = app.request.get('_route_params') %}

<li class="dropdown ">
    <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
        <i class="fa fa-globe"></i> Languages
    </a>
    <ul class="dropdown-menu">

        {% for langue in ['fr','en'] %} 

            {% if routeParams['_locale'] is defined %}
                {%set routeParams = routeParams|merge({'_locale': langue}) %}
            {% endif %}

            {% if app.request.get('_route') == 'homepage' %}
                {% set route = 'home' %}
            {% else %}
                {% set route = app.request.get('_route') %}
            {% endif %}  

            {% if actualLangue == langue %}
                <li  class="">
                    <a href="{{ path(route, routeParams) }}">
                        {{langue|trans}} <i class="fa fa-check"></i>
                    </a>
                </li>
            {% else %}
                <li>
                    <a href="{{ path(route, routeParams) }}">
                        {{langue|trans}} 
                    </a>
                </li>

            {% endif %} 

        {% endfor %}
    </ul>
</li>  

{# endif #}

